.navbar.navbar-default.navbar-fixed-top.black-translucent-background
  .container.header
    .navbar-header
      .navbar-header-left
        a.navbar-brand(href='/')
          strong.baba-logo
            | IIT-baba
        if user
          form.navbar-form.search(role='search', method='get', action='/search', title="Search anything: h8, meta, girls, amay")
            input.search-box#srch-term.form-control(placeholder='Search', name='box', type='text')
      .navbar-header-right
        button.navbar-toggle(type='button', data-toggle='collapse', data-target='.navbar-collapse')
          span.sr-only Toggle navigation
          span.icon-bar
          span.icon-bar
          span.icon-bar
    .collapse.navbar-collapse
      ul.nav.navbar-nav.navbar-right
        if !user
          li.about
            a(href='/about') About
          li.register
            a(href='/auth/iitbsso') Register
          li.login
            a(href='/login') Login
        else
          li.notifications
            a.dropdown-toggle.electric-blue-text-color#notification-icon(href='#notifications', data-toggle='dropdown')
              span.number-label#notification-label=navbarItems.notifications.unseen?navbarItems.notifications.unseen:null
              i.nav-icon.fa.fa-globe
              span.nav-icon-text Notifications
            .dropdown-menu.notification-dropdown
              - for(var n=0; n<navbarItems.notifications.notifications.length; n++)
                a.dropdown-item.notification(href='/profile/'+navbarItems.notifications.notifications[n].from)
                  img.notification-img(src='/images/profile/'+navbarItems.notifications.notifications[n].from+'.png') 
                  .notifiaction-content
                      .notifiaction-text=navbarItems.notifications.notifications[n].notification
                      if navbarItems.notifications.notifications[n].salary.new
                        .notifiaction-salary-stats(style="color:"+navbarItems.notifications.notifications[n].salary.color+";")
                          span.notifiaction-salary=navbarItems.notifications.notifications[n].salary.new+" "
                          span.notifiaction-change=navbarItems.notifications.notifications[n].salary.change+" "
                          span.notifiaction-change-icon
                            if navbarItems.notifications.notifications[n].salary.change>0
                              i.fa.fa-arrow-circle-up
                            else
                              i.fa.fa-arrow-circle-down
                          span.notifiaction-percentage=" "+navbarItems.notifications.notifications[n].salary.percent+"%"            
                      .notifiaction-from=navbarItems.notifications.notifications[n].from
                      .notification-time=navbarItems.notifications.notifications[n].time
                .dropdown-divider
              .more-notifications
                a.dropdown-item#allow-push(href='#')

          //
            li.requests#request-toggle
              a.dropdown-toggle.electric-blue-text-color(href='#requests', data-toggle='dropdown')
                span.number-label=navbarItems.requests.unseen?navbarItems.requests.unseen:null
                i.nav-icon.fa.fa-group
                span.nav-icon-text Requests
              .dropdown-menu.request-dropdown
                - for(var n=0; n<navbarItems.requests.requests.length; n++)                                
                  a.dropdown-item.request(href='#') 
                    img.request-img(src='/images/profile/'+navbarItems.requests.requests[n].from+'.png') 
                    .request-content
                        .request-from=navbarItems.requests.requests[n].from
                        .request-from-detail=navbarItems.requests.requests[n].from
                    .request-action
                        button.request-accept Accept
                        button.request-reject Reject
                  .dropdown-divider
                .more-requests
                  a.dropdown-item(href='#') MORE REQUESTS

          li.dropdown(class=(title == 'Account Management') ? 'active' : undefined)
            a.dropdown-toggle.electric-blue-text-color.settings-dropdown(href='#', data-toggle='dropdown')
              if user
                img.navbar-profile-img(src='/images/profile/'+user.ldap+'.png', onerror='this.src="/images/profile/null.png";')
              else
                img.navbar-profile-img(src='/images/baba.jpg')
              i.caret
            ul.dropdown-menu.settings
              li
                a(href='/profile/'+user.ldap) Account
              li.divider
              li
                a(href='/edit') Edit Info
              li.divider
              li
                a(href='/circle') Circle
              li.divider
              //  
                li
                  a(href='/search?page=0') Search Advanced
                li.divider
              li
                a(href='/predictions') Previous Predictions
              li.divider
              li
                a(href='/logout') Logout

    script.
      $('#notification-icon').click(function(){
        $('#notification-label').text(null);
        $.post("/notification",{action:"see"});
      });
//-
  .navbar.navbar-default.navbar-fixed-top.black-translucent-background
    .container
      .navbar-header
        button.navbar-toggle(type='button', data-toggle='collapse', data-target='.navbar-collapse')
          span.sr-only Toggle navigation
          span.icon-bar
          span.icon-bar
          span.icon-bar
        a.navbar-brand(href='/')
          i.fa.fa-cube
          | IITbaba
      .collapse.navbar-collapse
        ul.nav.navbar-nav
          li
            a.electric-blue-text-color(href='/') Home
          li
            a.electric-blue-text-color(href='/contact') Contact
      
        ul.nav.navbar-nav.navbar-right
          if user
            
            li.search
              form.navbar-form(role='search', method='get', action='/search')
                input.search-box#srch-term.form-control(placeholder='Search', name='box', type='text')
            
              
            li.nav-icon-btn.nav-icon-btn-success.dropdown
              a.dropdown-toggle.electric-blue-text-color(href='#notifications', data-toggle='dropdown', onclick='$.post("/notification",{action:"see"});')
                if navbarItems.notifications.unseen
                  span.label=navbarItems.notifications.unseen
                i.nav-icon.fa.fa-globe
                span.small-screen-text Notifications
            
              .dropdown-menu.widget-messages-alt.no-padding(style='width: 300px;')
                .slimScrollDiv(style='position: relative; overflow: hidden; width: auto; height: 250px;')
                  #main-navbar-messages.messages-list(style='overflow: hidden; width: auto; height: 250px;')
                    - for(var n=0; n<navbarItems.notifications.notifications.length; n++)            
                      .message
                        img.message-avatar(src='/images/profile/'+navbarItems.notifications.notifications[n].from+'.png', alt=navbarItems.notifications.notifications[n].from)
                        - var nt = navbarItems.notifications.notifications[n].notification
                        a.message-subject(href=navbarItems.notifications.notifications[n].link, id=navbarItems.notifications.notifications[n].id, onclick='$.post("/notification", {action:"click", id : this.id})')
                          if isNaN(nt)
                            =nt
                          else
                            if nt<0
                              .text-danger Worth change #{nt}                      
                            else
                              .text-success Worth change #{nt}                                                
                        .message-description
                          | prediction from 
                          strong=navbarItems.notifications.notifications[n].from
                          |
                          - var dateObj = navbarItems.notifications.notifications[n].createdAt
                          - var months = [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ]; 
                          - var timeToShow = dateObj.getDate()+ " "+ months[dateObj.getMonth()]+ " at " + dateObj.toLocaleTimeString()
                          | </br>												#{timeToShow}
                      // / .message
                  .slimScrollBar(style='background: rgb(0, 0, 0); width: 7px; position: absolute; top: 0px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 1px; height: 109.842px;')
                  .slimScrollRail(style='width: 7px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;')
                // / .messages-list
                a.messages-link(href='#notifications') MORE NOTIFICATIONS

            li.nav-icon-btn.nav-icon-btn-danger.dropdown
              a.dropdown-toggle.electric-blue-text-color(href='#requests', data-toggle='dropdown', onclick='$.post("/request",{action:"see"});')
                if navbarItems.requests.unseen
                  span.label=navbarItems.requests.unseen
                i.nav-icon.fa.fa-group
                span.small-screen-text Friend Requests
                // NOTIFICATIONS
              .dropdown-menu.widget-messages-alt.no-padding(style='width: 300px')
                .slimScrollDiv(style='position: relative; overflow: hidden; width: auto; height: 250px;')
                  #main-navbar-requests.messages-list(style='overflow: hidden; width: auto; height: 250px;')
                    - for(var n=0; n<navbarItems.requests.requests.length; n++)                                
                      .message(id=navbarItems.requests.requests[n].id)
                        img.message-avatar(src='/images/profile/'+navbarItems.notifications.notifications[n].from+'.png', alt=navbarItems.notifications.notifications[n].from)
                        a.message-subject(href='/profile/'+navbarItems.requests.requests[n].from, onclick='$.post("/request", {id : $(this).parent().attr("id"), action: "click"})')=navbarItems.requests.requests[n].name
                        button.btn.btn-success.btn-sm.request(from=navbarItems.requests.requests[n].from, onclick='$.post("/request", {id : $(this).parent().attr("id"), action: "accept", ldap: $(this).attr("from")}); $(this).parent().remove();') Accept
                        button.btn.btn-danger.btn-sm.request(from=navbarItems.requests.requests[n].from, onclick='$.post("/request", {id : $(this).parent().attr("id"), action: "reject", ldap: $(this).attr("from")}); $(this).parent().remove();') Reject
                      // / .notification
                  .slimScrollBar(style='background: rgb(0, 0, 0); width: 7px; position: absolute; top: 0px; opacity: 0.4; display: block; border-radius: 7px; z-index: 99; right: 1px;')
                  .slimScrollRail(style='width: 7px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;')
                  // / .notifications-list
                a.messages-link(href='#') MORE REQUESTS
            //-
              li.dropdown.notifications
              
                a.dropdown-toggle(href='#', data-toggle='dropdown' onclick='$("#unseen_notifictions").html("");$.post("/notifications/seen");')
                    i.material-icons(style='font-size:14px') notifications
                    if navbarItems.notifications.unseen
                      span.badge#unseen_notifictions=navbarItems.notifications.unseen
                
                ul.dropdown-menu
                  - for(var n=0; n<navbarItems.notifications.notifications.length; n++)
                    li
                      a(href=navbarItems.notifications.notifications[n].link, id=navbarItems.notifications.notifications[n].id, onclick='$.post("/notification/clicked", {notification_id : this.id});')=navbarItems.notifications.notifications[n].notification
                    li.divider
                  li
                    a(href='/notifications') See All Notifications

              li.dropdown.requests
                a.dropdown-toggle(href='#', data-toggle='dropdown' onclick='$("#unseen_requests").html("");$.post("/notifications/seen");')
                    i.material-icons(style='font-size:14px') group
                    if navbarItems.requests.unseen
                      span.badge#unseen_requests=navbarItems.requests.unseen

            li.dropdown(class=(title == 'Account Management') ? 'active' : undefined)
              a.dropdown-toggle.electric-blue-text-color(href='#', data-toggle='dropdown')
                if user.profile.upload_picture
                  img(src='/images/profile/'+user.ldap+'.png')
                else
                  if user.profile.profile_picture
                    img(src='https://gymkhana.iitb.ac.in'+user.profile.profile_picture)
                  else
                    img(src=user.gravatar(60))
                span= user.profile.fisrt_name
                i.caret
              ul.dropdown-menu
                li
                  a.electric-blue-text-color(href='/account') My Account
                li.divider
                li
                  a.electric-blue-text-color(href='/predict') Predict
                li.divider
                li
                  a.electric-blue-text-color(href='/search?page=0') Search
                li.divider
                li
                  a.electric-blue-text-color(href='/logout') Logout
                
          else
            li.sso
              a(href='/auth/iitbsso') Register
            li.login
              a(href='/login') Login